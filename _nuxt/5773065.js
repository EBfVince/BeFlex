(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{411:function(n,e,t){var content=t(452);"string"==typeof content&&(content=[[n.i,content,""]]),content.locals&&(n.exports=content.locals);(0,t(17).default)("04a9142e",content,!0,{sourceMap:!1})},451:function(n,e,t){"use strict";t(411)},452:function(n,e,t){(e=t(16)(!1)).push([n.i,".yo{margin-bottom:20px}",""]),n.exports=e},477:function(n,e,t){"use strict";t.r(e);t(8),t(31),t(15),t(9);var l={data:function(){return{file:null,loading:!1,loading2:!1,snackbarDisplay:!1,snackbarText:"null",cards:[]}},mounted:function(){this.getFiles()},methods:{upload:function(){var n=this;if(null!==this.file){console.log("file",this.file),this.loading=!0;var e=this.$fireStorage.ref().child("sdc/"+this.$route.params.id),t=this.file.name;e.child(t).put(this.file).then((function(e){n.snackbarText="Ok, fichier envoyé ✔",n.snackbarDisplay=!0,console.log("Uploaded a blob or file! ✔",e)})).catch((function(e){n.snackbarText="Une erreur est survenue",n.snackbarDisplay=!0,console.error("Erreur lors de l'upload",e)})).finally((function(){n.loading=!1,n.getFiles()}))}},getFiles:function(){var n=this;console.log("ok"),this.loading2=!0,this.cards=[],this.$fireStorage.ref().child("sdc/"+this.$route.params.id).listAll().then((function(e){0===e.items.length&&(n.loading2=!1),e.items.forEach((function(e){e.getMetadata().then((function(meta){console.log("item meta",meta),n.cards.push(meta)})).catch((function(n){console.error("Erreur lors de la récupération des metadata d'un fichier",n)})).finally((function(){n.loading2=!1}))}))})).catch((function(e){console.error("Erreur lors de la récupération des fichiers",e),n.loading2=!1}))},downloadFile:function(meta){meta.ref.getDownloadURL().then((function(n){window.open(n,"_blank")}))},deleteFile:function(meta){var n=this;meta.ref.delete().then((function(){n.snackbarText="Fichier supprimé ✔",n.snackbarDisplay=!0})).catch((function(e){n.snackbarText="Une erreur est survenue",n.snackbarDisplay=!0,console.error("Erreur lors de la suppression d'un fichier",e)})).finally((function(){n.getFiles()}))}}},r=(t(451),t(90)),o=t(126),c=t.n(o),d=t(379),f=t(177),h=t(103),v=t(404),k=t(393),m=t(485),_=t(117),x=t(176),y=t(405),w=t(470),component=Object(r.a)(l,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("v-file-input",{attrs:{loading:n.loading,label:"File input"},model:{value:n.file,callback:function(e){n.file=e},expression:"file"}}),n._v(" "),t("v-btn",{attrs:{loading:n.loading,disabled:null===n.file},on:{click:function(e){return n.upload(n.yo)}}},[n._v("Envoyer")]),n._v(" "),n.loading2?t("v-progress-circular",{attrs:{indeterminate:""}}):n._e(),n._v(" "),0!==n.cards.length||n.loading2?n._e():t("h3",[n._v("Aucun document")]),n._v(" "),t("v-container",[t("v-row",n._l(n.cards,(function(e){return t("v-col",{key:e.title,staticClass:"d-flex",attrs:{cols:"12"}},[t("v-card",{staticClass:"flex-grow-1",attrs:{ripple:""},on:{click:function(t){return n.downloadFile(e)}}},[t("v-card-text",[t("v-icon",[n._v("mdi-xbox-controller")]),n._v(" "+n._s(e.name)+"\n          ")],1)],1),n._v(" "),t("v-btn",{staticClass:"align-self-center ml-2",attrs:{icon:"",color:"red"},on:{click:function(t){return n.deleteFile(e)}}},[t("v-icon",[n._v("mdi-delete")])],1)],1)})),1)],1),n._v(" "),t("v-snackbar",{model:{value:n.snackbarDisplay,callback:function(e){n.snackbarDisplay=e},expression:"snackbarDisplay"}},[n._v("\n    "+n._s(n.snackbarText)+"\n    "),t("v-btn",{attrs:{color:"pink",text:""},on:{click:function(e){n.snackbarDisplay=!1}}},[n._v("\n      Fermer\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VCard:f.a,VCardText:h.c,VCol:v.a,VContainer:k.a,VFileInput:m.a,VIcon:_.a,VProgressCircular:x.a,VRow:y.a,VSnackbar:w.a})}}]);